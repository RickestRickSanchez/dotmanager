
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installed files &#8212; Dotmanager 1.9.2_3 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="example-configuration.html" />
    <link rel="prev" title="Dynamicfiles" href="dynamicfiles.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="installed-files">
<h1>Installed files<a class="headerlink" href="#installed-files" title="Permalink to this headline">¶</a></h1>
<p>The installed files store what links were created by Dotmanger. This
document explains how it is structured and how you can fix those file if
a critical unexpected error occurs.</p>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h2>
<p>Installed files are JSON files that are stored in <code class="docutils literal notranslate"><span class="pre">data/installed/</span></code>.
If you use the <code class="docutils literal notranslate"><span class="pre">--save</span></code> flag you can set the name of the installed
file that Dotmanger should use otherwise <code class="docutils literal notranslate"><span class="pre">default.json</span></code> is used.</p>
<p>This is a example of such a installed file.</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;@version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.5.0_3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Main&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Main&quot;</span><span class="p">,</span>
        <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/repos/dotfiles/files/tmux.conf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/tmux.conf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s2">&quot;permission&quot;</span><span class="p">:</span> <span class="mi">644</span><span class="p">,</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/repos/dotfiles/files/termite.conf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/.config/termite/config&quot;</span><span class="p">,</span>
                <span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s2">&quot;permission&quot;</span><span class="p">:</span> <span class="mi">644</span><span class="p">,</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/repos/dotfiles/files/antergos%pacman.conf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/pacman.conf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;permission&quot;</span><span class="p">:</span> <span class="mi">644</span><span class="p">,</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-01-02 09:03:33&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;installed&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span><span class="p">,</span>
        <span class="s2">&quot;updated&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-01-02 09:03:33&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;Git&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Git&quot;</span><span class="p">,</span>
        <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/repos/dotfiles/files/work</span><span class="si">%g</span><span class="s2">itconfig&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/.gitconfig&quot;</span><span class="p">,</span>
                <span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s2">&quot;permission&quot;</span><span class="p">:</span> <span class="mi">644</span><span class="p">,</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/repos/dotfiles/files/gitconfig_system&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/gitconfig&quot;</span><span class="p">,</span>
                <span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;permission&quot;</span><span class="p">:</span> <span class="mi">644</span><span class="p">,</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;installed&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span><span class="p">,</span>
        <span class="s2">&quot;updated&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-11-28 11:06:14&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Main&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see it stores a JSON Object with a <code class="docutils literal notranslate"><span class="pre">&#64;version</span></code> key and a key
for every installed profile. Generally keys that start with “&#64;” are
reserved special keys (but at the moment only the version key exists)
and all other keys are the names of installed profiles.</p>
<div class="section" id="version-key">
<h3>&#64;version key<a class="headerlink" href="#version-key" title="Permalink to this headline">¶</a></h3>
<p>The version key is important because Dotmanager will compare it to its
own version and will refuse to read the installed file if the installed
file schema version (the number after the underscore) does not match its
own installed file schema version.</p>
</div>
<div class="section" id="profile-keys">
<h3>Profile keys<a class="headerlink" href="#profile-keys" title="Permalink to this headline">¶</a></h3>
<p>For every profile that is installed there exists a key. It stores a
dictionary with the following keys:</p>
<ul class="simple">
<li>name: The name of the profile</li>
<li>parent: If the profile is a subprofile this key contains the name
of the parent (super) profile, otherwise the key doesn’t exist</li>
<li>installed: The date of the first installation</li>
<li>updated: The date of the last modification</li>
<li>links: Contains a list of all installed links by this profile</li>
</ul>
<div class="section" id="links-key">
<h4>links key<a class="headerlink" href="#links-key" title="Permalink to this headline">¶</a></h4>
<p>The links key in a profile contains a list of all installed links. For
each link there is a dictionary storing the following information:</p>
<ul class="simple">
<li>target: The absolut path to to the dotfile in your repo</li>
<li>name: The absolute path of the symlink</li>
<li>uid: The userid of the link owner</li>
<li>gid: The groupid of the link owner</li>
<li>permission: The permission of the target</li>
<li>date: The date of the last modification</li>
</ul>
</div>
</div>
</div>
<div class="section" id="installed-file-is-corrupted">
<h2>Installed file is corrupted<a class="headerlink" href="#installed-file-is-corrupted" title="Permalink to this headline">¶</a></h2>
<p>This should actually never happen and if it does please create a bug
ticket so we can make sure that this won’t happen again. But it is
possible -in very early versions of Dotmanager this happened a lot- that
an unexpected error occurs during the linking process. For those cases
Dotmanager creates a backup of the installed file before modifying it.
You will need to look into the backup and the modified version and
verify if all removals/additions/updates were really written to the
filesystem. When you are certain that the current installed file matches
the state of your filesystem you can remove the backup file and use
dotmanager again.</p>
</div>
<div class="section" id="version-update">
<h2>Version update<a class="headerlink" href="#version-update" title="Permalink to this headline">¶</a></h2>
<p>Dotmanager refuses to read the installed file if the installed file
schema version does not match it’s own version. This can happen when you
update Dotmanager and have an old installed file left on your device. To
circumvent this issue you have two opportunities:</p>
<ol class="arabic simple">
<li>Revert to an old version of Dotmanager, uninstall all profiles,
update Dotmanager, install all uninstalled profiles again</li>
<li>Look into the changes of the installed file, update the installed file
manually, increment the version number</li>
</ol>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Dotmanager</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Dotmanager Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="commandline-interface.html">Commandline Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-syntax.html">Python explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="info-module.html">Info module</a></li>
<li class="toctree-l2"><a class="reference internal" href="encryption.html">Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="dynamicfiles.html">Dynamicfiles</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installed files</a></li>
<li class="toctree-l2"><a class="reference internal" href="example-configuration.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html">Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference manual</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Dotmanager Usage</a><ul>
      <li>Previous: <a href="dynamicfiles.html" title="previous chapter">Dynamicfiles</a></li>
      <li>Next: <a href="example-configuration.html" title="next chapter">Examples</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Erik Schulz.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/usage/installed-file.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>