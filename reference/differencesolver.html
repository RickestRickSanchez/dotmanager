
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Differencesolver &#8212; Dotmanager 1.9.2_3 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DotManager" href="dotmgr.html" />
    <link rel="prev" title="Constants" href="constants.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-differencesolver">
<span id="differencesolver"></span><h1>Differencesolver<a class="headerlink" href="#module-differencesolver" title="Permalink to this headline">¶</a></h1>
<p>This module implements the Difference-Solvers (at the moment there is only
the standart DiffSolver) and their resulting data struct DiffLog.</p>
<dl class="class">
<dt id="differencesolver.DiffLog">
<em class="property">class </em><code class="descclassname">differencesolver.</code><code class="descname">DiffLog</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog" title="Permalink to this definition">¶</a></dt>
<dd><p>This class stores the operations that were determined by a Difference-
Solver. Furthermore it provides helpers to create such operations and
a funciton that allows multiple interpreter to interprete the operations
at the same time.</p>
<dl class="attribute">
<dt id="differencesolver.DiffLog.data">
<code class="descname">data</code><a class="headerlink" href="#differencesolver.DiffLog.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to store the operations</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">List</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog._DiffLog__append_data">
<code class="descname">_DiffLog__append_data</code><span class="sig-paren">(</span><em>operation</em>, <em>profilename</em>, <em>**args</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog._DiffLog__append_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a new operation to <cite>self.data</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>operation</strong> (<em>str</em>) – Name of the operation</li>
<li><strong>profilename</strong> (<em>str</em>) – Name of the profile that is associated with the
operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.add_info">
<code class="descname">add_info</code><span class="sig-paren">(</span><em>profilename</em>, <em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.add_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an info operation.</p>
<p>Info operations can be used to print out profile information to the
user. At the moment this is only evaluated by the PrettyPrint-
Interpreter to print out a string like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">profilename</span><span class="p">]:</span> <span class="n">message</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>profilename</strong> (<em>str</em>) – The name of the profile that prints the
information</li>
<li><strong>message</strong> (<em>str</em>) – The message to be printed</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.add_link">
<code class="descname">add_link</code><span class="sig-paren">(</span><em>symlink</em>, <em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.add_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an add-link operation.</p>
<p>Add-link operations indicate that a new link needs to be created.
This will be - for example - evaluated by the ExecuteInterpreter
to create the link in the filesystem and create an entry in the
installed file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>profilename</strong> (<em>str</em>) – The name of profile that the link belongs to</li>
<li><strong>symlink</strong> (<em>Dict</em>) – A dictionary that describes the symbolic link that
needs to be created</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.add_profile">
<code class="descname">add_profile</code><span class="sig-paren">(</span><em>profilename</em>, <em>parentname=None</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.add_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an add-profile operation.</p>
<p>Add-profile operations indicate that a new profile will be added/
installed. This will be - for example - evalutated by the
ExecuteInterpreter to create a new empty entry in the installed-file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>profilename</strong> (<em>str</em>) – The name of the new profile</li>
<li><strong>parentname</strong> (<em>str</em>) – The name of the parent of the new profile. If
<cite>None</cite> it will be treated as a root profile</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.remove_link">
<code class="descname">remove_link</code><span class="sig-paren">(</span><em>symlink_name</em>, <em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.remove_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a remove-link operation.</p>
<p>Remove-link operation indicate that a certain link needs to be removed.
This will be - for example - evaluated by the ExecuteInterpreter
to remove the link from the filesystem and the installed file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>symlink_name</strong> (<em>str</em>) – The absolute path to the symbolic link</li>
<li><strong>profilename</strong> (<em>str</em>) – The profile that the link is removed from</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.remove_profile">
<code class="descname">remove_profile</code><span class="sig-paren">(</span><em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.remove_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a remove-profile operation.</p>
<p>Remove-profile operations indicate that a certain profile will be
removed/uninstalled. This will be - for example - evaluated by the
ExecuteInterpreter to remove the profile in the installed file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>profilename</strong> (<em>str</em>) – The name of the to be removed profile</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.run_interpreter">
<code class="descname">run_interpreter</code><span class="sig-paren">(</span><em>*interpreters</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.run_interpreter" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a list of interpreters for all operations.</p>
<p>This function iterates over all operations and evaluates them by
feeding them into the given interpreters. Furthermore it initializes
the interpreters and feeds them additional “start” and “fin”
operations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>interpreters</strong> (<a class="reference internal" href="interpreters.html#interpreters.Interpreter" title="interpreters.Interpreter"><em>Interpreter</em></a>) – A list of interpreters that will
interpret the operations</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.update_link">
<code class="descname">update_link</code><span class="sig-paren">(</span><em>installed_symlink</em>, <em>new_symlink</em>, <em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.update_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a update-link operation.</p>
<p>Update-link operation indicate that a certain link needs to be replaced
by a new link. This will be - for example - evaluated by the
ExecuteInterpreter to remove the old link from the filesystem, create
the new link in the filesystem and update the entry of the old link in
the installed file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>installed_symlink</strong> (<em>Dict</em>) – A dictionary that describes the symbolic
link that needs to be replaced</li>
<li><strong>new_symlink</strong> (<em>Dict</em>) – A dictionary that describes the symbolic
link that will be the replacement for the old  link</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.update_parent">
<code class="descname">update_parent</code><span class="sig-paren">(</span><em>profilename</em>, <em>parentname</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.update_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an update-parent operation.</p>
<p>Update-parent operations indicate that a certain profile will change
its parent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>profilename</strong> (<em>str</em>) – The name of the to be updated profile</li>
<li><strong>parentname</strong> (<em>str</em>) – The name of the new parent of the profile. If
<cite>None</cite> it will be a root profile from now on.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.update_profile">
<code class="descname">update_profile</code><span class="sig-paren">(</span><em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.update_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an update-profile operation.</p>
<p>Update-profile operations indicate that a certain profile will be
updated. This will be - for example - evaluated by the
ExecuteInterpreter to update the changed-date of a profile in the
installed file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>profilename</strong> (<em>str</em>) – The name of the to be updated profile</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="differencesolver.DiffSolver">
<em class="property">class </em><code class="descclassname">differencesolver.</code><code class="descname">DiffSolver</code><span class="sig-paren">(</span><em>installed</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of profilenames and the currend install-file.
Generates a the ProfileResults from the profiles and compares it
with the installed-file. It will then generate a DiffLog that
solves the difference between those two</p>
<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_links">
<code class="descname">_DiffSolver__generate_links</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the difflog with all operations needed to link all profiles</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_profile_link">
<code class="descname">_DiffSolver__generate_profile_link</code><span class="sig-paren">(</span><em>profile_dict</em>, <em>all_profilenames</em>, <em>parent_name</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_profile_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves the differences between a single profile and the installed
ones and appends the difflog for those. If parent_name is None the
profile is treated as a root profile</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_profile_unlink">
<code class="descname">_DiffSolver__generate_profile_unlink</code><span class="sig-paren">(</span><em>profile_name</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_profile_unlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Append to difflog that we want to remove a profile,
all it’s subprofiles and all their links</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_unlinks">
<code class="descname">_DiffSolver__generate_unlinks</code><span class="sig-paren">(</span><em>profilelist</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_unlinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the difflog with all operations needed to
unlink multiple profiles</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>installed</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver.solve">
<code class="descname">solve</code><span class="sig-paren">(</span><em>link</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>This will create an DiffLog from the set profiles</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Dotmanager</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Dotmanager Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="constants.html">Constants</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Differencesolver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dotmgr.html">DotManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="dynamicfile.html">Dynamicfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="info.html">Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="interpreters.html">Interpreters</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html">Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Reference manual</a><ul>
      <li>Previous: <a href="constants.html" title="previous chapter">Constants</a></li>
      <li>Next: <a href="dotmgr.html" title="next chapter">DotManager</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Erik Schulz.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reference/differencesolver.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>