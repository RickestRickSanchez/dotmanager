
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Differencesolver &#8212; Dotmanager 1.10.2_3 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DotManager" href="dotmgr.html" />
    <link rel="prev" title="Constants" href="constants.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-differencesolver">
<span id="differencesolver"></span><h1>Differencesolver<a class="headerlink" href="#module-differencesolver" title="Permalink to this headline">¶</a></h1>
<p>This module implements the Difference-Solvers (at the moment there is only
the standart DiffSolver) and their resulting data struct DiffLog.</p>
<dl class="class">
<dt id="differencesolver.DiffLog">
<em class="property">class </em><code class="descclassname">differencesolver.</code><code class="descname">DiffLog</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class stores the operations that were determined by a Difference-
Solver. Furthermore it provides helpers to create such operations and
a funciton that allows multiple interpreter to interprete the operations
at the same time.</p>
<dl class="attribute">
<dt id="differencesolver.DiffLog.data">
<code class="descname">data</code><a class="headerlink" href="#differencesolver.DiffLog.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to store the operations</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog._DiffLog__append_data">
<code class="descname">_DiffLog__append_data</code><span class="sig-paren">(</span><em>operation</em>, <em>profilename</em>, <em>**args</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog._DiffLog__append_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a new operation to <cite>self.data</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operation</strong> (<em>str</em>) – Name of the operation</p></li>
<li><p><strong>profilename</strong> (<em>str</em>) – Name of the profile that is associated with the
operation</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.add_info">
<code class="descname">add_info</code><span class="sig-paren">(</span><em>profilename</em>, <em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.add_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an info operation.</p>
<p>Info operations can be used to print out profile information to the
user. At the moment this is only evaluated by the PrettyPrint-
Interpreter to print out a string like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">profilename</span><span class="p">]:</span> <span class="n">message</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profilename</strong> (<em>str</em>) – The name of the profile that prints the
information</p></li>
<li><p><strong>message</strong> (<em>str</em>) – The message to be printed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.add_link">
<code class="descname">add_link</code><span class="sig-paren">(</span><em>symlink</em>, <em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.add_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an add-link operation.</p>
<p>Add-link operations indicate that a new link needs to be created.
This will be - for example - evaluated by the ExecuteInterpreter
to create the link in the filesystem and create an entry in the
installed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profilename</strong> (<em>str</em>) – The name of profile that the link belongs to</p></li>
<li><p><strong>symlink</strong> (<em>Dict</em>) – A dictionary that describes the symbolic link that
needs to be created</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.add_profile">
<code class="descname">add_profile</code><span class="sig-paren">(</span><em>profilename</em>, <em>parentname=None</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.add_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an add-profile operation.</p>
<p>Add-profile operations indicate that a new profile will be added/
installed. This will be - for example - evalutated by the
ExecuteInterpreter to create a new empty entry in the installed-file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profilename</strong> (<em>str</em>) – The name of the new profile</p></li>
<li><p><strong>parentname</strong> (<em>str</em>) – The name of the parent of the new profile. If
<cite>None</cite> it will be treated as a root profile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.remove_link">
<code class="descname">remove_link</code><span class="sig-paren">(</span><em>symlink_name</em>, <em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.remove_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a remove-link operation.</p>
<p>Remove-link operation indicate that a certain link needs to be removed.
This will be - for example - evaluated by the ExecuteInterpreter
to remove the link from the filesystem and the installed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symlink_name</strong> (<em>str</em>) – The absolute path to the symbolic link</p></li>
<li><p><strong>profilename</strong> (<em>str</em>) – The profile that the link is removed from</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.remove_profile">
<code class="descname">remove_profile</code><span class="sig-paren">(</span><em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.remove_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a remove-profile operation.</p>
<p>Remove-profile operations indicate that a certain profile will be
removed/uninstalled. This will be - for example - evaluated by the
ExecuteInterpreter to remove the profile in the installed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>profilename</strong> (<em>str</em>) – The name of the to be removed profile</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.run_interpreter">
<code class="descname">run_interpreter</code><span class="sig-paren">(</span><em>*interpreters</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.run_interpreter" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a list of interpreters for all operations.</p>
<p>This function iterates over all operations and evaluates them by
feeding them into the given interpreters. Furthermore it initializes
the interpreters and feeds them additional “start” and “fin”
operations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interpreters</strong> (<a class="reference internal" href="interpreters.html#interpreters.Interpreter" title="interpreters.Interpreter"><em>Interpreter</em></a>) – A list of interpreters that will
interpret the operations</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.update_link">
<code class="descname">update_link</code><span class="sig-paren">(</span><em>installed_symlink</em>, <em>new_symlink</em>, <em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.update_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a update-link operation.</p>
<p>Update-link operation indicate that a certain link needs to be replaced
by a new link. This will be - for example - evaluated by the
ExecuteInterpreter to remove the old link from the filesystem, create
the new link in the filesystem and update the entry of the old link in
the installed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>installed_symlink</strong> (<em>Dict</em>) – A dictionary that describes the symbolic
link that needs to be replaced</p></li>
<li><p><strong>new_symlink</strong> (<em>Dict</em>) – A dictionary that describes the symbolic
link that will be the replacement for the old  link</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.update_parent">
<code class="descname">update_parent</code><span class="sig-paren">(</span><em>profilename</em>, <em>parentname</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.update_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an update-parent operation.</p>
<p>Update-parent operations indicate that a certain profile will change
its parent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profilename</strong> (<em>str</em>) – The name of the to be updated profile</p></li>
<li><p><strong>parentname</strong> (<em>str</em>) – The name of the new parent of the profile. If
<cite>None</cite> it will be a root profile from now on.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffLog.update_profile">
<code class="descname">update_profile</code><span class="sig-paren">(</span><em>profilename</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffLog.update_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an update-profile operation.</p>
<p>Update-profile operations indicate that a certain profile will be
updated. This will be - for example - evaluated by the
ExecuteInterpreter to update the changed-date of a profile in the
installed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>profilename</strong> (<em>str</em>) – The name of the to be updated profile</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="differencesolver.DiffSolver">
<em class="property">class </em><code class="descclassname">differencesolver.</code><code class="descname">DiffSolver</code><span class="sig-paren">(</span><em>installed</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This solver determines the differences between a list of profiles
and an installed-file. It is used to generate a DiffLog that stores
all operations to resolve the differences between those.</p>
<dl class="attribute">
<dt id="differencesolver.DiffSolver.profilenames">
<code class="descname">profilenames</code><a class="headerlink" href="#differencesolver.DiffSolver.profilenames" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of names of all profiles that is used
for solving</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="differencesolver.DiffSolver.installed">
<code class="descname">installed</code><a class="headerlink" href="#differencesolver.DiffSolver.installed" title="Permalink to this definition">¶</a></dt>
<dd><p>The installed-file that is used for solving</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="differencesolver.DiffSolver.difflog">
<code class="descname">difflog</code><a class="headerlink" href="#differencesolver.DiffSolver.difflog" title="Permalink to this definition">¶</a></dt>
<dd><p>The resulting difflog</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#differencesolver.DiffLog" title="differencesolver.DiffLog">DiffLog</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="differencesolver.DiffSolver.default_options">
<code class="descname">default_options</code><a class="headerlink" href="#differencesolver.DiffSolver.default_options" title="Permalink to this definition">¶</a></dt>
<dd><p>The default options that the profiles will use</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="differencesolver.DiffSolver.default_dir">
<code class="descname">default_dir</code><a class="headerlink" href="#differencesolver.DiffSolver.default_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>The default directory that profiles start in</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="differencesolver.DiffSolver.parent_arg">
<code class="descname">parent_arg</code><a class="headerlink" href="#differencesolver.DiffSolver.parent_arg" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the parent that all profiles will change
its parent to (only set if <code class="docutils literal notranslate"><span class="pre">--parent</span></code> was specified)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_links">
<code class="descname">_DiffSolver__generate_links</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates operations to update all profiles.</p>
<p>This function imports and runs the profiles and resolves each root
profile with their subprofiles separately.</p>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_profile_link">
<code class="descname">_DiffSolver__generate_profile_link</code><span class="sig-paren">(</span><em>profile_dict</em>, <em>all_profilenames</em>, <em>parent_name</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_profile_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves the differences between a single profile and the installed
ones and appends the difflog for those. Calls itself recursively for
all subprofiles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profile_dict</strong> (<em>Dict</em>) – The result of an executed profile that will be
compared against the installed-file</p></li>
<li><p><strong>all_profilenames</strong> (<em>List</em>) – A list with all profile names (including
all sub- and root-profiles</p></li>
<li><p><strong>parent_name</strong> (<em>str</em>) – The name of the profiles (new) parent. If
parent_name is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the profile is treated as a root
profile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_profile_unlink">
<code class="descname">_DiffSolver__generate_profile_unlink</code><span class="sig-paren">(</span><em>profile_name</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_profile_unlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate operations to remove a single installed profile.</p>
<p>Appends to difflog that we want to remove a profile,
all it’s subprofiles and all their links.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>profile_name</strong> (<em>str</em>) – Name of the profile that will be removed</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver._DiffSolver__generate_unlinks">
<code class="descname">_DiffSolver__generate_unlinks</code><span class="sig-paren">(</span><em>profilelist</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver._DiffSolver__generate_unlinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates operations to remove all installed profiles of
<code class="docutils literal notranslate"><span class="pre">profilelist</span></code>.</p>
<p>Skips profiles that are not installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>profilelist</strong> (<em>List</em>) – A list of names of profiles that will be
unlinked</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>installed</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor. Initializes attributes from commandline arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>installed</strong> (<em>Dict</em>) – The installed-file that is used for solving</p></li>
<li><p><strong>args</strong> (<em>argparse</em>) – The parsed arguments</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="differencesolver.DiffSolver.solve">
<code class="descname">solve</code><span class="sig-paren">(</span><em>link</em><span class="sig-paren">)</span><a class="headerlink" href="#differencesolver.DiffSolver.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Start solving differences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>link</strong> (<em>bool</em>) – True, if this an update. False if all links shall be
removed (Yes, I know that’s not intuitive but it wont stay like
this).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>DiffLog</em> – The resulting DiffLog</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Dotmanager</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../usage/index.html">Dotmanager Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">For developers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../contributing_link.html">Contributing Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html">How to document Dotmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests.html">Testing suite of Dotmanager</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Reference manual</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../manpage/index.html">Dotmanager Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manpage/index.html#commandline-interface">Commandline Interface</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">For developers</a><ul>
  <li><a href="index.html">Reference manual</a><ul>
      <li>Previous: <a href="constants.html" title="previous chapter">Constants</a></li>
      <li>Next: <a href="dotmgr.html" title="next chapter">DotManager</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Erik Schulz.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/developers/reference/differencesolver.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>